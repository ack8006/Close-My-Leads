{% extends "base.html" %}

{% block page_title %}Welcome{% endblock %}

{% block content_area %}
{% for key in keys %}
<div><span class="bold">
    {% ifequal key.portalId None %}
        Anonymous
    {% else %}
        {{key.portalId|escape}}
    {% endifequal %}
    </span>
        says: 
    '{{key.api_key|escape}}'.
        Actual ID is:
    '{{key.actual_portal|escape}}'
</div>
{% endfor %}

<form action="" method="post" accept-charset="utf-8">
    <table>
    <tr><td>Hub ID: </td><td><input type="text" name="portalId" id="portalId"></td></tr>
    <tr><td></td>&nbsp;<td><span class="validate portal">Hub ID is required!</span>&nbsp;</td></tr>
    <tr><td>API key: </td><td><input type="text" name="api_key" value="" id="api_key"></td></tr>
    <tr><td></td>&nbsp;<td><span class="validate key">API key is required!</span>&nbsp;</td></tr>
    <tr><td>&nbsp;</td><td><input type="submit" value="Submit" id="submit"></td></tr>
    </table>
</form>
{% endblock %}
</div><!-- content -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
{% block scripts %}
<script type="text/javascript">
$(function() {
    $('#submit').click(function() {
        if (!$('#api_key').val()) {
            $('.validate.key').show('fast');
            if (!$('#portal').val()) {
                $('.validate.portal').show('fast');
            }
            return false;
        };
        if ($('#api_key').val()) {
            $('.validate.key').hide('fast');
        }
        if (!$('#portalId').val()) {
            $('.validate.portal').show('fast');
            return false;
        }
        if ($('#portalId').val()) {
            $('.validate.portal').hide('fast');
        }
    })
})
</script>
{% endblock %}